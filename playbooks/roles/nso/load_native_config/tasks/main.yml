- name: Sync-from for all configs
  include_role:
     name: nso/call_action
  vars:
     action_path: "/ncs:devices/device={{ item.name }}/sync-from"
     action_args: ""
  loop:
    "{{ netsim_device_list }}"
  when:
    item.config_file is defined

- name: "Load native configs"
  include_role:
     name: nso/call_action
  vars:
     action_path: "/ncs:devices/device={{ item.name }}/load-native-config"
     action_args: 
        file: "{{ item.config_file }}"
        mode: replace
  loop:
    "{{ netsim_device_list }}"
  when:
    item.config_file is defined

